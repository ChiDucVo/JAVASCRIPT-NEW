<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        let matrix = [];
        const inputMatrix = () => {
            let rows = Number(prompt("Nhập số hàng của mảng: "));
            let cols = Number(prompt("Nhập số cột của mảng: "));
            matrix = [];
            for (let i = 0; i < rows; i++) {
                let row = prompt(`Nhập hàng ${i + 1} (các số cách nhau bởi dấu cách):`).split(" ").map(Number);
                if (row.length !== cols) {
                    alert("Số cột không đúng, vui lòng nhập lại hàng này!");
                    i--;
                    continue;
                }
                matrix.push(row);
            }
        }
        const displayMatrix = () => {
            alert("Mảng hiện tại:\n" + matrix.map(row => row.join(", ")).join("\n"));
        }
        const sumMatrix = () => {
            let sum = matrix.flat().reduce((acc, num) => acc + num, 0);
            alert("Tổng các phần tử trong mảng: " + sum);
        }
        const mainDiagonal = () => {
            let sum = 0;
            for (let i = 0; i < matrix.length; i++) {
                sum += matrix[i][i]
            }
            alert(" Tổng đường chéo chình là : ${sum}")
        }
        const extraDiagonal = () => {
            let sum = 0;
            for (let i = 0; i < matrix.length; i++) {
                sum += matrix[i][matrix.length - 1 - i]
            }
            alert(" Tổng đường chéo phụ là : ${sum}")
        }
        const averageInRowOfInCol = () => {
            let choice = prompt("1. Trung bình cộng hàng\n2. Trung bình cộng cột")
            let index = Number(prompt("Nhập chỉ số hàng hoặc cột cần tính trung bình: "));
            let sum = 0;
            if (choice == 1) {
                sum = matrix[index].reduce((a, b) => a + b, 0)
            } else {
                for (let i = 0; i < matrix.length; i++) {
                    sum += matrix[i][index]
                }
            }
            alert(`Trung bình cộng của hàng ${index}: ${sum / matrix.length}`);
        }
        const menu = () => {
            do {
                let choice = prompt(
                    "1. Nhập mảng\n2. Hiển thị mảng\n3. Tính tổng\n4. Tổng đường chéo chính\n5. Tổng đường chéo phụ\n6. Trung bình cộng hàng hoặc cột\n7. Thoát"
                );
                switch (choice) {
                    case "1":
                        inputMatrix()
                        break
                    case "2":
                        displayMatrix()
                        break
                    case "3":
                        sumMatrix()
                        break
                    case "4":
                        mainDiagonal()
                        break
                    case "5":
                        extraDiagonal()
                        break
                    case "6":
                        averageInRowOfInCol()
                        break
                    case "7":
                        return
                    default:
                        alert("Nhập sai, vui lòng nhập lại")
                }
            } while (true)
        }
    </script>
</body>

</html>